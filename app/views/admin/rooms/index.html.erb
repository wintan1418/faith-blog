<% content_for(:page_title) { "Manage Rooms" } %>

<div class="flex items-center justify-between mb-6">
  <p class="text-gray-600">Manage community discussion rooms</p>
  <%= link_to new_admin_room_path, class: "btn btn-primary" do %>
    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
    </svg>
    Create Room
  <% end %>
</div>

<div class="bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden">
  <table class="w-full">
    <thead class="bg-gray-50 border-b border-gray-200">
      <tr>
        <th class="px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Room</th>
        <th class="px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Type</th>
        <th class="px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Members</th>
        <th class="px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Posts</th>
        <th class="px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Status</th>
        <th class="px-6 py-3 text-right text-xs font-semibold text-gray-600 uppercase tracking-wider">Actions</th>
      </tr>
    </thead>
    <tbody class="divide-y divide-gray-200">
      <% @rooms.each do |room| %>
        <tr class="hover:bg-gray-50">
          <td class="px-6 py-4">
            <div class="flex items-center gap-3">
              <div class="w-10 h-10 rounded-lg bg-gray-100 flex items-center justify-center text-xl">
                <%= room.icon %>
              </div>
              <div>
                <p class="font-semibold text-gray-900"><%= room.name %></p>
                <p class="text-sm text-gray-500 truncate max-w-xs"><%= truncate(room.description, length: 50) %></p>
              </div>
            </div>
          </td>
          <td class="px-6 py-4">
            <span class="badge badge-secondary"><%= room.room_type.humanize %></span>
          </td>
          <td class="px-6 py-4 text-gray-600">
            <%= room.room_memberships.count %>
          </td>
          <td class="px-6 py-4 text-gray-600">
            <%= room.posts.count %>
          </td>
          <td class="px-6 py-4">
            <% if room.is_public? %>
              <span class="badge badge-success">Public</span>
            <% else %>
              <span class="badge badge-secondary">Private</span>
            <% end %>
          </td>
          <td class="px-6 py-4 text-right">
            <div class="flex items-center justify-end gap-2">
              <%= link_to admin_room_path(room), class: "btn btn-ghost btn-sm" do %>
                View
              <% end %>
              <%= link_to edit_admin_room_path(room), class: "btn btn-secondary btn-sm" do %>
                Edit
              <% end %>
            </div>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>

